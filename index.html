















<!DOCTYPE html>
<html style="overflow-x:auto;overflow-y:auto;">
<head>
	<title>区域管理</title>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta name="author" content="http://www.jeeplus.org/"/>
<meta name="renderer" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=9,IE=10" />
<meta http-equiv="Expires" content="0"><meta http-equiv="Cache-Control" content="no-cache"><meta http-equiv="Cache-Control" content="no-store">
<!-- 引入jquery插件 -->
<script src="/jeeplus/static/jquery/jquery-2.1.1.min.js" type="text/javascript"></script>
<script src="/jeeplus/static/jquery/jquery-migrate-1.1.1.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="/jeeplus/static/TableDnD/jquery.tablednd.js"></script>


<!-- 引入依赖的第三方插件 -->
<script src="/jeeplus/static/slimscroll/jquery.slimscroll.min.js"></script>



<script src="/jeeplus/static/jquery-validation/1.14.0/jquery.validate.min.js" type="text/javascript"></script>
<script src="/jeeplus/static/jquery-validation/1.14.0/localization/messages_zh.min.js" type="text/javascript"></script>
<link href="/jeeplus/static/jquery-jbox/2.3/Skins/Bootstrap/jbox.min.css" rel="stylesheet" />
<script src="/jeeplus/static/jquery-jbox/2.3/jquery.jBox-2.3.min.js" type="text/javascript"></script>
<script src="/jeeplus/static/My97DatePicker/WdatePicker.js" type="text/javascript"></script>
<script src="/jeeplus/static/pace/pace.min.js"></script>
<script src="/jeeplus/static/metisMenu/jquery.metisMenu.js"></script>
<link href="/jeeplus/static/iCheck/custom.css" rel="stylesheet" />
<script src="/jeeplus/static/iCheck/icheck.min.js"></script>
<script src="/jeeplus/static/iCheck/icheck-init.js"></script>
<link href="/jeeplus/static/dataTables/dataTables.bootstrap.css" rel="stylesheet" />
<script src="/jeeplus/static/dataTables/jquery.dataTables.js"></script>
<script src="/jeeplus/static/dataTables/dataTables.bootstrap.js"></script>




<!-- jeeplus -->
<link href="/jeeplus/static/common/jeeplus.css" type="text/css" rel="stylesheet" />
<script src="/jeeplus/static/common/jeeplus.js" type="text/javascript"></script>

<!-- jquery ui -->
<script src="/jeeplus/static/jquery-ui/jquery-ui.min.js"></script>

<!-- 引入bootstrap插件 -->
<!-- bootswatch主题效果不怎么好，停止切换，使用官网的默认版本，如果你想切换主题请访问http://bootswatch.com/下载最新版版主题，by刘高峰 -->
<!--  <link href="/jeeplus/static/bootstrap/3.3.4/css_default/bootstrap.min.css" type="text/css" rel="stylesheet" />-->
<link href="/jeeplus/static/bootstrap/3.3.4/css_default/bootstrap.min.css" type="text/css" rel="stylesheet" />
<script src="/jeeplus/static/bootstrap/3.3.4/js/bootstrap.min.js"  type="text/javascript"></script>
<link href="/jeeplus/static/awesome/4.4/css/font-awesome.min.css" rel="stylesheet" />
<link href="/jeeplus/static/common/css/style.css?v=3.2.0" type="text/css" rel="stylesheet" />

<!-- 引入layer插件 -->
<script src="/jeeplus/static/layer-v2.3/layer/layer.js"></script>
<script src="/jeeplus/static/layer-v2.3/layer/laydate/laydate.js"></script>

<!--引入webuploader-->
<link rel="stylesheet" type="text/css" href="/jeeplus/static/webuploader-0.1.5/webuploader.css">
<script type="text/javascript" src="/jeeplus/static/webuploader-0.1.5/webuploader.js"></script>


<!-- 引入自定义文件 -->
<script src="/jeeplus/static/common/mustache.min.js" type="text/javascript"></script>
<script src="/jeeplus/static/common/content.js" type="text/javascript"></script>
<link href="/jeeplus/static/common/css/login.css" type="text/css" rel="stylesheet" />
<script type="text/javascript">var ctx = '/jeeplus/a', ctxStatic='/jeeplus/static';</script>








		
	
	
	<meta name="decorator" content="default"/>
	<link href="/jeeplus/static/treeTable/themes/vsStyle/treeTable.min.css" rel="stylesheet" type="text/css" />
<script src="/jeeplus/static/treeTable/jquery.treeTable.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			var tpl = $("#treeTableTpl").html().replace(/(\/\/\<!\-\-)|(\/\/\-\->)/g,"");
			var data = [{"id":"17e8e72326574a0ea94b15d6eeddbb6d","isNewRecord":false,"remarks":"","createDate":"2016-01-11 15:09:38","updateDate":"2016-01-11 15:09:38","parentIds":"0,1,c11497c3311a4be29253f29bd59ab485,364a832bee8a42afa333e338813330de,","name":"软件大道","sort":30,"code":"","type":"4","parentId":"364a832bee8a42afa333e338813330de"},{"id":"19298dc65ecd45cc803a6da294d1ff60","isNewRecord":false,"remarks":"","createDate":"2016-01-15 11:55:09","updateDate":"2016-01-15 11:55:09","parentIds":"0,1,","name":"北京","sort":30,"code":"","type":"2","parentId":"1"},{"id":"364a832bee8a42afa333e338813330de","isNewRecord":false,"remarks":"","createDate":"2015-12-24 13:38:02","updateDate":"2016-01-11 15:09:25","parentIds":"0,1,c11497c3311a4be29253f29bd59ab485,","name":"南京","sort":30,"code":"","type":"3","parentId":"c11497c3311a4be29253f29bd59ab485"},{"id":"90ecd439eb3845db97a627d9242145e8","isNewRecord":false,"remarks":"","createDate":"2016-01-15 11:54:55","updateDate":"2016-01-15 11:54:55","parentIds":"0,1,","name":"上海","sort":30,"code":"","type":"2","parentId":"1"},{"id":"c11497c3311a4be29253f29bd59ab485","isNewRecord":false,"remarks":"","createDate":"2015-11-11 09:37:48","updateDate":"2015-11-11 09:38:14","parentIds":"0,1,","name":"江苏","sort":30,"code":"","type":"2","parentId":"1"},{"id":"e418dc99691d4e29961d53ca218ece8b","isNewRecord":false,"remarks":"","createDate":"2016-01-15 11:54:30","updateDate":"2016-01-15 11:54:30","parentIds":"0,1,","name":"福建","sort":30,"code":"0100","type":"2","parentId":"1"},{"id":"ee38f91df4444529b00f093be5a07b7a","isNewRecord":false,"remarks":"","createDate":"2016-01-15 11:54:44","updateDate":"2016-01-15 11:54:44","parentIds":"0,1,e418dc99691d4e29961d53ca218ece8b,","name":"福州","sort":30,"code":"0200","type":"1","parentId":"e418dc99691d4e29961d53ca218ece8b"},{"id":"1","isNewRecord":false,"remarks":null,"createDate":"2013-05-27 00:00:00","updateDate":"2013-05-27 00:00:00","parentIds":"0,","name":"中国","sort":10,"code":"100000","type":"1","parentId":"0"}], rootId = "0";
			addRow("#treeTableList", tpl, data, rootId, true);
			$("#treeTable").treeTable({expandLevel : 5});
		});
		function addRow(list, tpl, data, pid, root){
			for (var i=0; i<data.length; i++){
				var row = data[i];
				if ((!row?'':!row.parentId?'':row.parentId) == pid){
					$(list).append(Mustache.render(tpl, {
						dict: {
							type: getDictLabel([{"id":"17","isNewRecord":false,"remarks":null,"createDate":"2013-05-27 00:00:00","updateDate":"2013-05-27 00:00:00","value":"1","label":"国家","type":"sys_area_type","description":"区域类型","sort":10,"parentId":"0"},{"id":"18","isNewRecord":false,"remarks":null,"createDate":"2013-05-27 00:00:00","updateDate":"2013-05-27 00:00:00","value":"2","label":"省份、直辖市","type":"sys_area_type","description":"区域类型","sort":20,"parentId":"0"},{"id":"19","isNewRecord":false,"remarks":null,"createDate":"2013-05-27 00:00:00","updateDate":"2013-05-27 00:00:00","value":"3","label":"地市","type":"sys_area_type","description":"区域类型","sort":30,"parentId":"0"},{"id":"20","isNewRecord":false,"remarks":null,"createDate":"2013-05-27 00:00:00","updateDate":"2013-05-27 00:00:00","value":"4","label":"区县","type":"sys_area_type","description":"区域类型","sort":40,"parentId":"0"}], row.type)
						}, pid: (root?0:pid), row: row
					}));
					addRow(list, tpl, data, row.id);
				}
			}
		}

		function refresh(){//刷新
			
			window.location="/jeeplus/a/sys/area/";
		}
	</script>

</head>
<body id="" class="gray-bg"  style="">
	
	<div class="wrapper wrapper-content">
	<div class="ibox">
	<div class="ibox-title">
			<h5>区域列表 </h5>
			<div class="ibox-tools">
				<a class="collapse-link">
					<i class="fa fa-chevron-up"></i>
				</a>
				<a class="dropdown-toggle" data-toggle="dropdown" href="form_basic.html#">
					<i class="fa fa-wrench"></i>
				</a>
				<ul class="dropdown-menu dropdown-user">
					<li><a href="#">选项1</a>
					</li>
					<li><a href="#">选项2</a>
					</li>
				</ul>
				<a class="close-link">
					<i class="fa fa-times"></i>
				</a>
			</div>
	</div>
    
    <div class="ibox-content">
	













<!-- 0:隐藏tip, 1隐藏box,不设置显示全部 -->


<script type="text/javascript">top.$.jBox.closeTip();</script>

	
	
	<!-- 工具栏 -->
	<div class="row">
	<div class="col-sm-12">
		<div class="pull-left">
			
				



















<button class="btn btn-white btn-sm" data-toggle="tooltip" data-placement="left" onclick="add()" title="添加"><i class="fa fa-plus"></i> 添加</button>

<script type="text/javascript">
	function add(){
		openDialog("新增"+'区域',"/jeeplus/a/sys/area/form","800px", "500px","");
	}
</script><!-- 增加按钮 -->
			
	       <button class="btn btn-white btn-sm " data-toggle="tooltip" data-placement="left" onclick="refresh()" title="刷新"><i class="glyphicon glyphicon-repeat"></i> 刷新</button>
		
		</div>
	</div>
	</div>
	
	<table id="treeTable"  class="table table-striped table-bordered table-hover table-condensed dataTables-example dataTable">
		<thead><tr><th>区域名称</th><th>区域编码</th><th>区域类型</th><th>备注</th><th>操作</th></tr></thead>
		<tbody id="treeTableList"></tbody>
	</table>
	<br/>
	</div>
	</div>
</div>
	<script type="text/template" id="treeTableTpl">
		<tr id="{{row.id}}" pId="{{pid}}">
			<td><a  href="#" onclick="openDialogView('查看区域', '/jeeplus/a/sys/area/form?id={{row.id}}','800px', '500px')">{{row.name}}</a></td>
			<td>{{row.code}}</td>
			<td>{{dict.type}}</td>
			<td>{{row.remarks}}</td>
			<td>
				
				<a href="#" onclick="openDialogView('查看区域', '/jeeplus/a/sys/area/form?id={{row.id}}','800px', '500px')" class="btn btn-info btn-xs" ><i class="fa fa-search-plus"></i>  查看</a>
				
				
					<a href="#" onclick="openDialog('修改区域', '/jeeplus/a/sys/area/form?id={{row.id}}','800px', '500px')" class="btn btn-success btn-xs" ><i class="fa fa-edit"></i> 修改</a>
				
				
					<a href="/jeeplus/a/sys/area/delete?id={{row.id}}" onclick="return confirmx('要删除该区域及所有子区域项吗？', this.href)" class="btn btn-danger btn-xs" ><i class="fa fa-trash"></i> 删除</a>
				
				
					<a href="#" onclick="openDialog('添加下级区域', '/jeeplus/a/sys/area/form?parent.id={{row.id}}','800px', '500px')" class="btn btn-primary btn-xs" ><i class="fa fa-plus"></i> 添加下级区域</a>
				
			</td>
		</tr>
	</script>

	<script type="text/javascript">//<!-- 无框架时，左上角显示菜单图标按钮。
		if(!(self.frameElement && self.frameElement.tagName=="IFRAME")){
			$("body").prepend("<i id=\"btnMenu\" class=\"icon-th-list\" style=\"cursor:pointer;float:right;margin:10px;\"></i><div id=\"menuContent\"></div>");
			$("#btnMenu").click(function(){

				top.layer.open({
				    type: 2, 
				    area:['300px','350px'],
				    content: 'get:/jeeplus/a/sys/menu/treeselect;JSESSIONID=1a191636d92f441c824df05b44a5c6ce' //这里content是一个URL，如果你不想让iframe出现滚动条，你还可以content: ['http://sentsin.com', 'no']
				});
				//top.$.jBox('get:/jeeplus/a/sys/menu/treeselect;JSESSIONID=1a191636d92f441c824df05b44a5c6ce', {title:'选择菜单', buttons:{'关闭':true}, width:300, height: 350, top:10});
				//if ($("#menuContent").html()==""){$.get("/jeeplus/a/sys/menu/treeselect", function(data){$("#menuContent").html(data);});}else{$("#menuContent").toggle(100);}
			});
		}//-->
	</script>
</body>
</html>
